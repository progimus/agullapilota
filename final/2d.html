<html>
<head>
    <meta charset="utf-8">
    <script src="../libs/planck-with-testbed.js"></script>
    <script src="./public/levels/singleplayer/physics.js"></script>
    <script src="Game.js"></script>
    <script>
        planck.testbed("Pinball", function(testbed) {
            var game = new Game(1, physics);
            //console.log(game.world.getBodyList())

            testbed.step = function() {
                game.update()
            }

            document.body.addEventListener('keydown', evt => {
                if(evt.keyCode == 37) game.updateFlipper({ active: true, id: 'p1LeftFlipper' });
                if(evt.keyCode == 39) game.updateFlipper({ active: true, id: 'p1RightFlipper' });
            });

            document.body.addEventListener('keyup', evt => {
                if(evt.keyCode == 37) game.updateFlipper({ active: false, id: 'p1LeftFlipper' });
                if(evt.keyCode == 39) game.updateFlipper({ active: false, id: 'p1RightFlipper' });
            });

            return game.world;
        });
    </script>
</head>
<body>
</body>
</html>
